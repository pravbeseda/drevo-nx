import{a as G,b as J}from"./chunk-JUQTP6VR.js";import{d as L,e as U,k as W,m as q}from"./chunk-AJY6GSS3.js";import{$a as s,A as j,Bb as m,Db as b,Ea as _,Nb as O,Ob as z,Qb as N,Ra as E,S as T,Tb as $,U as x,Va as R,Xb as I,Yb as w,Z as l,_a as h,da as p,db as k,g as A,ha as D,ja as P,jb as v,ka as F,lb as g,pb as M,q as S,r as H,ub as C,vb as y,wb as B}from"./chunk-D3BFCWCT.js";var K=(()=>{let t=class t{constructor(e){this.fakeArticleService=e}getArticle(e){return this.fakeArticleService.getArticle(e)}};t.\u0275fac=function(r){return new(r||t)(p(G))},t.\u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var u=(()=>{let t=class t{constructor(e){this.articleApiService=e}getArticle(e){return this.articleApiService.getArticle(e)}};t.\u0275fac=function(r){return new(r||t)(p(K))},t.\u0275prov=l({token:t,factory:t.\u0275fac});let i=t;return i})();var Q=(()=>{let t=class t{constructor(e){this.sanitized=e}transform(e){return this.sanitized.bypassSecurityTrustHtml(e||"")}};t.\u0275fac=function(r){return new(r||t)(s(W,16))},t.\u0275pipe=F({name:"safeHtml",type:t,pure:!0,standalone:!0});let i=t;return i})();var V=(()=>{let t=class t{constructor(e){this._el=e,this.tags=["H1","H2","H3","H4","H5","H6"],this.sectionChanged=new k}onScroll(e){let r=e.target,o,n=this._el.nativeElement.children,c=r.scrollTop,X=r.offsetTop;n.forEach(f=>{this.tags.includes(f.tagName.toUpperCase())&&f.offsetTop-X<=c&&(o=f.id)}),o!==this.currentSection&&(this.currentSection=o,this.sectionChanged.emit(this.currentSection))}};t.\u0275fac=function(r){return new(r||t)(s(R))},t.\u0275dir=P({type:t,selectors:[["","drevoScrollSpy",""]],hostBindings:function(r,o){r&1&&m("scroll",function(c){return o.onScroll(c)},!1,_)},inputs:{tags:"tags"},outputs:{sectionChanged:"sectionChanged"},standalone:!0});let i=t;return i})();function tt(i,t){if(i&1&&(C(0,"h1"),O(1),y()),i&2){let a=b();h(),z(a==null?null:a.title)}}function et(i,t){if(i&1&&(v(0,tt,2,1,"h1",1),B(1,"div",2),I(2,"safeHtml")),i&2){let a=b();g("ngIf",a.showTitle),h(),g("innerHtml",w(2,2,t==null?null:t.body),E)}}var Ht=(()=>{let t=class t{set articleId(e){this.articleIdSubject.next(e)}constructor(e,r,o){this.articleService=e,this.route=r,this.sidebarRightService=o,this.showTitle=!0,this.showContent=!0,this.articleIdSubject=new A(null),this.routeId$=this.route.paramMap.pipe(S(n=>n.get("articleId"))),this.article$=H([this.articleIdSubject,this.routeId$]).pipe(j(([n,c])=>!!n||!!c),S(([n,c])=>Number(c??n)),T(n=>this.articleService.getArticle(n)),x(n=>this.setContent(n)))}ngOnDestroy(){this.sidebarRightService.setContent(null)}setContent(e){(this.route?.snapshot.data.showContent||this.showContent)&&this.sidebarRightService.setContent([{title:"\u041D\u0430\u0447\u0430\u043B\u043E \u0441\u0442\u0430\u0442\u044C\u0438",anchor:"0",subtitles:[{subtitles:[{title:"Subpart 1",anchor:"1"},{title:"Subpart 2",anchor:"2"}]},{title:"Part 2",anchor:"3"},{title:"Part 3",anchor:"4"}]},{title:"Part 4",anchor:"5",subtitles:[{title:"Subpart 1",anchor:"6"},{title:"Subpart 2",anchor:"7"}]},{title:"Part 5",anchor:"8"}])}onSectionChanged(e){throw new Error("Not implemented")}};t.\u0275fac=function(r){return new(r||t)(s(u),s(q),s(J))},t.\u0275cmp=D({type:t,selectors:[["drevo-article"]],inputs:{articleId:"articleId",showTitle:"showTitle",showContent:"showContent"},standalone:!0,features:[N([u]),$],decls:3,vars:3,consts:[["drevoScrollSpy","",1,"article",3,"sectionChanged"],[4,"ngIf"],[3,"innerHtml"]],template:function(r,o){if(r&1&&(C(0,"div",0),m("sectionChanged",function(c){return o.onSectionChanged(c)}),v(1,et,3,4),I(2,"async"),y()),r&2){let n;h(),M(1,(n=w(2,1,o.article$))?1:-1,n)}},dependencies:[U,Q,L,V],styles:["[_nghost-%COMP%]{min-height:100%;display:block}[_nghost-%COMP%]   .article[_ngcontent-%COMP%]{min-height:100%}"],changeDetection:0});let i=t;return i})();export{Ht as a};
