import{a as G,b as J}from"./chunk-QWYYHD6I.js";import{d as L,e as U,k as W,n as q}from"./chunk-MW47MGD3.js";import{$a as s,A as j,Bb as d,Db as I,Ea as R,Nb as O,Pb as z,Qb as N,Ra as _,S as T,Tb as $,U as x,Va as k,Xb as w,Yb as A,Z as l,_a as m,da as p,db as M,g as b,ha as D,ja as F,jb as g,ka as E,lb as S,pb as P,q as v,r as H,ub as C,vb as y,wb as B}from"./chunk-D3BFCWCT.js";var K=(()=>{let t=class t{constructor(e){this.fakeArticleService=e}getArticle(e){return this.fakeArticleService.getArticle(e)}};t.\u0275fac=function(r){return new(r||t)(p(G))},t.\u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var f=(()=>{let t=class t{constructor(e){this.articleApiService=e}getArticle(e){return this.articleApiService.getArticle(e)}};t.\u0275fac=function(r){return new(r||t)(p(K))},t.\u0275prov=l({token:t,factory:t.\u0275fac});let i=t;return i})();var Q=(()=>{let t=class t{constructor(e){this.sanitized=e}transform(e){return this.sanitized.bypassSecurityTrustHtml(e||"")}};t.\u0275fac=function(r){return new(r||t)(s(W,16))},t.\u0275pipe=E({name:"safeHtml",type:t,pure:!0,standalone:!0});let i=t;return i})();var V=(()=>{let t=class t{constructor(e){this._el=e,this.tags=["H1","H2","H3","H4","H5","H6"],this.sectionChanged=new M}onScroll(e){let r=e.target,o,n=this._el.nativeElement.children,c=r.scrollTop,X=r.offsetTop;n.forEach(u=>{this.tags.includes(u.tagName.toUpperCase())&&u.offsetTop-X<=c&&(o=u.id)}),o!==this.currentSection&&(this.currentSection=o,this.sectionChanged.emit(this.currentSection))}};t.\u0275fac=function(r){return new(r||t)(s(k))},t.\u0275dir=F({type:t,selectors:[["","drevoScrollSpy",""]],hostBindings:function(r,o){r&1&&d("scroll",function(c){return o.onScroll(c)},!1,R)},inputs:{tags:"tags"},outputs:{sectionChanged:"sectionChanged"},standalone:!0});let i=t;return i})();function tt(i,t){if(i&1&&(C(0,"h1",3),O(1),y()),i&2){let a=I();m(),z(" ",a==null?null:a.title," ")}}function et(i,t){if(i&1&&(g(0,tt,2,1,"h1",1),B(1,"div",2),w(2,"safeHtml")),i&2){let a=I();S("ngIf",a.showTitle),m(),S("innerHtml",A(2,2,t==null?null:t.body),_)}}var Ht=(()=>{let t=class t{set articleId(e){this.articleIdSubject.next(e)}constructor(e,r,o){this.articleService=e,this.route=r,this.sidebarRightService=o,this.showTitle=!0,this.showContent=!0,this.articleIdSubject=new b(null),this.routeId$=this.route.paramMap.pipe(v(n=>n.get("articleId"))),this.article$=H([this.articleIdSubject,this.routeId$]).pipe(j(([n,c])=>!!n||!!c),v(([n,c])=>Number(c??n)),T(n=>this.articleService.getArticle(n)),x(n=>this.setContent(n)))}ngOnDestroy(){this.sidebarRightService.setContent(void 0)}setContent(e){(this.route?.snapshot.data.showContent||this.showContent)&&this.sidebarRightService.setContent(e.content)}onSectionChanged(e){throw new Error("Not implemented")}};t.\u0275fac=function(r){return new(r||t)(s(f),s(q),s(J))},t.\u0275cmp=D({type:t,selectors:[["drevo-article"]],inputs:{articleId:"articleId",showTitle:"showTitle",showContent:"showContent"},standalone:!0,features:[N([f]),$],decls:3,vars:3,consts:[["drevoScrollSpy","",1,"article",3,"sectionChanged"],["id","0",4,"ngIf"],[3,"innerHtml"],["id","0"]],template:function(r,o){if(r&1&&(C(0,"div",0),d("sectionChanged",function(c){return o.onSectionChanged(c)}),g(1,et,3,4),w(2,"async"),y()),r&2){let n;m(),P(1,(n=A(2,1,o.article$))?1:-1,n)}},dependencies:[U,Q,L,V],styles:["[_nghost-%COMP%]{min-height:100%;display:block}[_nghost-%COMP%]   .article[_ngcontent-%COMP%]{min-height:100%}"],changeDetection:0});let i=t;return i})();export{Ht as a};
